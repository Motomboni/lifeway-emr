# Generated by Django 6.0 on 2026-01-26 14:08

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('patients', '0007_add_retainership_fields'),
        ('visits', '0006_timelineevent'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AntenatalRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('pregnancy_number', models.PositiveIntegerField(default=1, help_text='Sequential pregnancy number for this patient')),
                ('booking_date', models.DateField(help_text='Date of first antenatal visit (booking)')),
                ('lmp', models.DateField(help_text='Last Menstrual Period (LMP)')),
                ('edd', models.DateField(help_text='Expected Due Date (EDD) - calculated from LMP')),
                ('parity', models.CharField(choices=[('PRIMIGRAVIDA', 'Primigravida (First Pregnancy)'), ('MULTIGRAVIDA', 'Multigravida (2-4 Pregnancies)'), ('GRAND_MULTIGRAVIDA', 'Grand Multigravida (5+ Pregnancies)')], default='PRIMIGRAVIDA', help_text='Parity classification', max_length=20)),
                ('gravida', models.PositiveIntegerField(default=1, help_text='Number of pregnancies (including current)')),
                ('para', models.PositiveIntegerField(default=0, help_text='Number of deliveries at 37+ weeks')),
                ('abortions', models.PositiveIntegerField(default=0, help_text='Number of abortions/miscarriages')),
                ('living_children', models.PositiveIntegerField(default=0, help_text='Number of living children')),
                ('past_medical_history', models.TextField(blank=True, help_text='Past medical history relevant to pregnancy')),
                ('past_surgical_history', models.TextField(blank=True, help_text='Past surgical history')),
                ('family_history', models.TextField(blank=True, help_text='Family history relevant to pregnancy')),
                ('allergies', models.TextField(blank=True, help_text='Known allergies')),
                ('previous_cs', models.BooleanField(default=False, help_text='Previous Cesarean Section')),
                ('previous_cs_count', models.PositiveIntegerField(default=0, help_text='Number of previous Cesarean Sections')),
                ('previous_complications', models.TextField(blank=True, help_text='Previous pregnancy complications')),
                ('pregnancy_type', models.CharField(choices=[('SINGLETON', 'Singleton'), ('TWINS', 'Twins'), ('TRIPLETS', 'Triplets'), ('MORE', 'More')], default='SINGLETON', help_text='Type of pregnancy', max_length=20)),
                ('high_risk', models.BooleanField(default=False, help_text='High-risk pregnancy flag')),
                ('risk_factors', models.JSONField(blank=True, default=list, help_text="List of risk factors (e.g., ['diabetes', 'hypertension', 'advanced_maternal_age'])")),
                ('outcome', models.CharField(choices=[('ONGOING', 'Ongoing Pregnancy'), ('DELIVERED', 'Delivered'), ('MISCARRIAGE', 'Miscarriage'), ('STILLBIRTH', 'Stillbirth'), ('TERMINATION', 'Termination'), ('ECTOPIC', 'Ectopic Pregnancy'), ('MOLAR', 'Molar Pregnancy')], default='ONGOING', help_text='Pregnancy outcome', max_length=20)),
                ('delivery_date', models.DateField(blank=True, help_text='Date of delivery (if delivered)', null=True)),
                ('delivery_gestational_age_weeks', models.PositiveIntegerField(blank=True, help_text='Gestational age at delivery (weeks)', null=True)),
                ('delivery_gestational_age_days', models.PositiveIntegerField(blank=True, help_text='Gestational age at delivery (days)', null=True)),
                ('clinical_notes', models.TextField(blank=True, help_text='General clinical notes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(help_text='User who created this record', on_delete=django.db.models.deletion.PROTECT, related_name='antenatal_records_created', to=settings.AUTH_USER_MODEL)),
                ('patient', models.ForeignKey(help_text='Patient (must be female)', on_delete=django.db.models.deletion.PROTECT, related_name='antenatal_records', to='patients.patient')),
            ],
            options={
                'verbose_name': 'Antenatal Record',
                'verbose_name_plural': 'Antenatal Records',
                'db_table': 'antenatal_records',
                'ordering': ['-booking_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AntenatalOutcome',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('delivery_date', models.DateField(help_text='Date of delivery')),
                ('delivery_time', models.TimeField(blank=True, help_text='Time of delivery', null=True)),
                ('delivery_type', models.CharField(choices=[('VAGINAL', 'Vaginal Delivery'), ('VAGINAL_INSTRUMENTAL', 'Vaginal Instrumental'), ('CESAREAN_ELECTIVE', 'Elective Cesarean'), ('CESAREAN_EMERGENCY', 'Emergency Cesarean')], help_text='Type of delivery', max_length=20)),
                ('delivery_gestational_age_weeks', models.PositiveIntegerField(help_text='Gestational age at delivery (weeks)')),
                ('delivery_gestational_age_days', models.PositiveIntegerField(default=0, help_text='Gestational age at delivery (days)')),
                ('number_of_babies', models.PositiveIntegerField(default=1, help_text='Number of babies delivered')),
                ('live_births', models.PositiveIntegerField(default=1, help_text='Number of live births')),
                ('stillbirths', models.PositiveIntegerField(default=0, help_text='Number of stillbirths')),
                ('baby_1_gender', models.CharField(blank=True, choices=[('MALE', 'Male'), ('FEMALE', 'Female')], help_text='Baby 1 gender', max_length=10)),
                ('baby_1_weight', models.DecimalField(blank=True, decimal_places=2, help_text='Baby 1 birth weight (kg)', max_digits=5, null=True)),
                ('baby_1_apgar_1min', models.IntegerField(blank=True, help_text='Baby 1 APGAR at 1 minute', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(10)])),
                ('baby_1_apgar_5min', models.IntegerField(blank=True, help_text='Baby 1 APGAR at 5 minutes', null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(10)])),
                ('additional_babies', models.JSONField(blank=True, default=list, help_text="Additional babies data [{'gender': 'FEMALE', 'weight': 2.5, 'apgar_1min': 8, 'apgar_5min': 9}]")),
                ('maternal_complications', models.TextField(blank=True, help_text='Maternal complications')),
                ('neonatal_complications', models.TextField(blank=True, help_text='Neonatal complications')),
                ('notes', models.TextField(blank=True, help_text='Additional notes about delivery and outcome')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('recorded_by', models.ForeignKey(help_text='User who recorded the outcome', on_delete=django.db.models.deletion.PROTECT, related_name='antenatal_outcomes_recorded', to=settings.AUTH_USER_MODEL)),
                ('antenatal_record', models.OneToOneField(help_text='Antenatal record this outcome belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='delivery_outcome', to='antenatal.antenatalrecord')),
            ],
            options={
                'verbose_name': 'Antenatal Outcome',
                'verbose_name_plural': 'Antenatal Outcomes',
                'db_table': 'antenatal_outcomes',
            },
        ),
        migrations.CreateModel(
            name='AntenatalVisit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('visit_date', models.DateField(help_text='Date of antenatal visit')),
                ('visit_type', models.CharField(choices=[('BOOKING', 'Booking Visit'), ('ROUTINE', 'Routine Visit'), ('EMERGENCY', 'Emergency Visit'), ('FOLLOW_UP', 'Follow-up Visit'), ('DELIVERY', 'Delivery Visit')], default='ROUTINE', help_text='Type of antenatal visit', max_length=20)),
                ('gestational_age_weeks', models.PositiveIntegerField(help_text='Gestational age at visit (weeks)')),
                ('gestational_age_days', models.PositiveIntegerField(default=0, help_text='Gestational age at visit (days)')),
                ('chief_complaint', models.TextField(blank=True, help_text='Chief complaint for this visit')),
                ('blood_pressure_systolic', models.IntegerField(blank=True, help_text='Systolic BP (mmHg)', null=True, validators=[django.core.validators.MinValueValidator(50), django.core.validators.MaxValueValidator(300)])),
                ('blood_pressure_diastolic', models.IntegerField(blank=True, help_text='Diastolic BP (mmHg)', null=True, validators=[django.core.validators.MinValueValidator(30), django.core.validators.MaxValueValidator(200)])),
                ('weight', models.DecimalField(blank=True, decimal_places=2, help_text='Weight (kg)', max_digits=5, null=True)),
                ('fundal_height', models.DecimalField(blank=True, decimal_places=2, help_text='Fundal height (cm)', max_digits=5, null=True)),
                ('fetal_heart_rate', models.IntegerField(blank=True, help_text='Fetal heart rate (bpm)', null=True, validators=[django.core.validators.MinValueValidator(100), django.core.validators.MaxValueValidator(200)])),
                ('fetal_presentation', models.CharField(blank=True, choices=[('CEPHALIC', 'Cephalic'), ('BREECH', 'Breech'), ('TRANSVERSE', 'Transverse'), ('UNKNOWN', 'Unknown')], help_text='Fetal presentation', max_length=20)),
                ('urine_protein', models.CharField(blank=True, choices=[('NEGATIVE', 'Negative'), ('TRACE', 'Trace'), ('1+', '1+'), ('2+', '2+'), ('3+', '3+'), ('4+', '4+')], help_text='Urine protein', max_length=20)),
                ('urine_glucose', models.CharField(blank=True, choices=[('NEGATIVE', 'Negative'), ('TRACE', 'Trace'), ('1+', '1+'), ('2+', '2+'), ('3+', '3+'), ('4+', '4+')], help_text='Urine glucose', max_length=20)),
                ('clinical_notes', models.TextField(blank=True, help_text='Clinical notes for this visit')),
                ('next_appointment_date', models.DateField(blank=True, help_text='Next scheduled appointment date', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('antenatal_record', models.ForeignKey(help_text='Antenatal record this visit belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='visits', to='antenatal.antenatalrecord')),
                ('recorded_by', models.ForeignKey(help_text='User who recorded this visit', on_delete=django.db.models.deletion.PROTECT, related_name='antenatal_visits_recorded', to=settings.AUTH_USER_MODEL)),
                ('visit', models.ForeignKey(help_text='Visit this antenatal visit is associated with', on_delete=django.db.models.deletion.CASCADE, related_name='antenatal_visits', to='visits.visit')),
            ],
            options={
                'verbose_name': 'Antenatal Visit',
                'verbose_name_plural': 'Antenatal Visits',
                'db_table': 'antenatal_visits',
                'ordering': ['-visit_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AntenatalUltrasound',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scan_date', models.DateField(help_text='Date of ultrasound scan')),
                ('scan_type', models.CharField(choices=[('DATING', 'Dating Scan'), ('NT', 'Nuchal Translucency'), ('ANATOMY', 'Anomaly Scan'), ('GROWTH', 'Growth Scan'), ('DOPPLER', 'Doppler Study'), ('BIOPHYSICAL', 'Biophysical Profile'), ('OTHER', 'Other')], help_text='Type of ultrasound scan', max_length=20)),
                ('gestational_age_weeks', models.PositiveIntegerField(help_text='Gestational age at scan (weeks)')),
                ('gestational_age_days', models.PositiveIntegerField(default=0, help_text='Gestational age at scan (days)')),
                ('crl', models.DecimalField(blank=True, decimal_places=2, help_text='Crown-Rump Length (mm)', max_digits=5, null=True)),
                ('bpd', models.DecimalField(blank=True, decimal_places=2, help_text='Biparietal Diameter (mm)', max_digits=5, null=True)),
                ('hc', models.DecimalField(blank=True, decimal_places=2, help_text='Head Circumference (mm)', max_digits=5, null=True)),
                ('ac', models.DecimalField(blank=True, decimal_places=2, help_text='Abdominal Circumference (mm)', max_digits=5, null=True)),
                ('fl', models.DecimalField(blank=True, decimal_places=2, help_text='Femur Length (mm)', max_digits=5, null=True)),
                ('estimated_fetal_weight', models.DecimalField(blank=True, decimal_places=2, help_text='Estimated Fetal Weight (g)', max_digits=6, null=True)),
                ('number_of_fetuses', models.PositiveIntegerField(default=1, help_text='Number of fetuses')),
                ('fetal_presentation', models.CharField(blank=True, choices=[('CEPHALIC', 'Cephalic'), ('BREECH', 'Breech'), ('TRANSVERSE', 'Transverse'), ('UNKNOWN', 'Unknown')], help_text='Fetal presentation', max_length=20)),
                ('placenta_location', models.CharField(blank=True, help_text='Placenta location', max_length=50)),
                ('placenta_grade', models.CharField(blank=True, choices=[('0', 'Grade 0'), ('1', 'Grade 1'), ('2', 'Grade 2'), ('3', 'Grade 3')], help_text='Placenta grade', max_length=10)),
                ('amniotic_fluid', models.CharField(blank=True, choices=[('NORMAL', 'Normal'), ('OLIGOHYDRAMNIOS', 'Oligohydramnios'), ('POLYHYDRAMNIOS', 'Polyhydramnios')], help_text='Amniotic fluid assessment', max_length=20)),
                ('findings', models.TextField(blank=True, help_text='Ultrasound findings')),
                ('report', models.TextField(blank=True, help_text='Ultrasound report')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('performed_by', models.ForeignKey(help_text='User who performed/interpreted the scan', on_delete=django.db.models.deletion.PROTECT, related_name='antenatal_ultrasounds_performed', to=settings.AUTH_USER_MODEL)),
                ('antenatal_visit', models.ForeignKey(help_text='Antenatal visit this ultrasound belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='ultrasounds', to='antenatal.antenatalvisit')),
            ],
            options={
                'verbose_name': 'Antenatal Ultrasound',
                'verbose_name_plural': 'Antenatal Ultrasounds',
                'db_table': 'antenatal_ultrasounds',
                'ordering': ['-scan_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AntenatalMedication',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('medication_name', models.CharField(help_text='Name of medication', max_length=255)),
                ('category', models.CharField(choices=[('FOLIC_ACID', 'Folic Acid'), ('IRON', 'Iron Supplement'), ('CALCIUM', 'Calcium Supplement'), ('MULTIVITAMIN', 'Multivitamin'), ('ANTIMALARIAL', 'Antimalarial'), ('ANTIBIOTIC', 'Antibiotic'), ('ANALGESIC', 'Analgesic'), ('ANTIHYPERTENSIVE', 'Antihypertensive'), ('ANTIDIABETIC', 'Antidiabetic'), ('OTHER', 'Other')], help_text='Medication category', max_length=50)),
                ('dose', models.CharField(help_text="Dose (e.g., '200mg', '1 tablet')", max_length=100)),
                ('frequency', models.CharField(help_text="Frequency (e.g., 'Once daily', 'Twice daily')", max_length=100)),
                ('duration', models.CharField(blank=True, help_text="Duration (e.g., '2 weeks', 'Until delivery')", max_length=100)),
                ('start_date', models.DateField(help_text='Start date')),
                ('end_date', models.DateField(blank=True, help_text='End date (if applicable)', null=True)),
                ('notes', models.TextField(blank=True, help_text='Notes about the medication')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('prescribed_by', models.ForeignKey(help_text='User who prescribed the medication', on_delete=django.db.models.deletion.PROTECT, related_name='antenatal_medications_prescribed', to=settings.AUTH_USER_MODEL)),
                ('antenatal_visit', models.ForeignKey(help_text='Antenatal visit this medication belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='medications', to='antenatal.antenatalvisit')),
            ],
            options={
                'verbose_name': 'Antenatal Medication',
                'verbose_name_plural': 'Antenatal Medications',
                'db_table': 'antenatal_medications',
                'ordering': ['-start_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AntenatalLab',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('test_name', models.CharField(help_text='Name of lab test', max_length=255)),
                ('test_date', models.DateField(help_text='Date test was ordered/performed')),
                ('hb', models.DecimalField(blank=True, decimal_places=2, help_text='Hemoglobin (g/dL)', max_digits=4, null=True)),
                ('pcv', models.DecimalField(blank=True, decimal_places=2, help_text='Packed Cell Volume (%)', max_digits=4, null=True)),
                ('blood_group', models.CharField(blank=True, choices=[('A+', 'A+'), ('A-', 'A-'), ('B+', 'B+'), ('B-', 'B-'), ('AB+', 'AB+'), ('AB-', 'AB-'), ('O+', 'O+'), ('O-', 'O-')], help_text='Blood group', max_length=10)),
                ('rhesus', models.CharField(blank=True, choices=[('POSITIVE', 'Positive'), ('NEGATIVE', 'Negative')], help_text='Rhesus factor', max_length=10)),
                ('hiv', models.CharField(blank=True, choices=[('NEGATIVE', 'Negative'), ('POSITIVE', 'Positive'), ('PENDING', 'Pending')], help_text='HIV status', max_length=20)),
                ('hbsag', models.CharField(blank=True, choices=[('NEGATIVE', 'Negative'), ('POSITIVE', 'Positive'), ('PENDING', 'Pending')], help_text='HBsAg (Hepatitis B)', max_length=20)),
                ('vdrl', models.CharField(blank=True, choices=[('NEGATIVE', 'Negative'), ('POSITIVE', 'Positive'), ('PENDING', 'Pending')], help_text='VDRL (Syphilis)', max_length=20)),
                ('results', models.TextField(blank=True, help_text='Test results (free text or structured)')),
                ('notes', models.TextField(blank=True, help_text='Notes about the test')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('ordered_by', models.ForeignKey(help_text='User who ordered the test', on_delete=django.db.models.deletion.PROTECT, related_name='antenatal_labs_ordered', to=settings.AUTH_USER_MODEL)),
                ('antenatal_visit', models.ForeignKey(help_text='Antenatal visit this lab test belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='lab_tests', to='antenatal.antenatalvisit')),
            ],
            options={
                'verbose_name': 'Antenatal Lab Test',
                'verbose_name_plural': 'Antenatal Lab Tests',
                'db_table': 'antenatal_labs',
                'ordering': ['-test_date', '-created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='antenatalrecord',
            index=models.Index(fields=['patient', '-booking_date'], name='antenatal_r_patient_46ae24_idx'),
        ),
        migrations.AddIndex(
            model_name='antenatalrecord',
            index=models.Index(fields=['outcome', '-booking_date'], name='antenatal_r_outcome_df84d9_idx'),
        ),
        migrations.AddIndex(
            model_name='antenatalvisit',
            index=models.Index(fields=['antenatal_record', '-visit_date'], name='antenatal_v_antenat_01cb75_idx'),
        ),
        migrations.AddIndex(
            model_name='antenatalvisit',
            index=models.Index(fields=['visit'], name='antenatal_v_visit_i_b6fba1_idx'),
        ),
    ]
